!function(){"use strict";var e=window.rapidPageConfig,t=window.YAHOO,a=window.wafer,n=t.context,i=n.meta,o=void 0===i?{}:i;n.feature,o.siteAttribute,o.url,a.utils.getUrlParameterValueByName;var r=e.rapidConfig;r&&r.keys,t.i13n&&t.i13n.SPACEID,function(e){var t=e.rapidInstance,a=e.rapidPageConfig,n=e.wafer,i=e.YAHOO,o=i.context,r=o.device,s=void 0===r?"desktop":r,c=o.feature,d=void 0===c?"":c,m=o.lang,l=o.meta,u=void 0===l?{}:l,f=o.region,p=o.site,v={},g="smartphone"===s,y=function(e){var t={},a=function(a){if(e.hasOwnProperty(a)){var n=e[a];Array.isArray(n)?(t[a]=[],n.forEach((function(e){t[a].push(e)}))):"function"==typeof n||(Object(n)===n?t[a]=Object.assign({},n):t[a]=n)}};for(var n in e)a(n);return t}(a.rapidConfig),w=y.keys;w.p_cpos="",w.pct="comments";var h=u.uuid;function C(a){a.preventDefault(),a.stopPropagation();var n=g?"community-bar-iframe":"community-bar-"+h+"-iframe",i=document.getElementById(n),o=function(t,a,n,i,r){var s=a-t,c=s/n;c=Math.min(c,1);var d,m=(d=c)*d*d;e.scroll(0,r+i*m),s<n&&requestAnimationFrame((function(e){var a=e||(new Date).getTime();o(t,a,n,i,r)}))};t&&t.beaconClick("cmmts","Reaction",0,{elm:"cmmt_open",g:h,itc:0},null);var r=i&&i.contentWindow;r&&(r.postMessage("canvass:expand","*"),g||requestAnimationFrame((function(t){var a=t||(new Date).getTime(),n=a,r=e.pageYOffset,s=i.getBoundingClientRect().top+-150;o(n,a,1e3,s,r)})))}!function(a){var o=a.commentsAllowed,r=a.uuid;if(!o||!r)return console.error("[comments] comments not allowed on this page, uuid missing or not needed due to SpotIm testing"),null;var c=u.xhrPathPrefix,l=void 0===c?"/nel_ms/_td/remote":c,b=a.messageId,_=a.publisher,O=a.replyId,x=a.title,A=a.type,I=a.contentType,M=a.url,S=g?"community-bar":"community-bar-"+r,k=!g&&-1!==d.indexOf("disableCommentsMessage");if(!v[r]){var P=a.spaceId||i.i13n&&i.i13n.SPACEID;h=r,w.pstaid_p=h,w.pstaid=h,A&&(w.pt=A),_&&(w.pcp=_);try{var E=0;if(document&&document.location.search.indexOf("bcmt")>=1&&(E=1),-1!==d.indexOf("disableCommentsMessage")&&(E=0),v[r]=!0,k&&n){var D=document.getElementById(S),T=l.replace("rcv","td");T+="?m_mode=json&m_id=tdv2-applet-canvass.message&ctrl=CanvassMessage",T+="&context=".concat(r,"&device=").concat(s,"&site=").concat(p,"&region=").concat(f,"&lang=").concat(m);var j=JSON.stringify({config:{ui:{enableFeedback:!1}},ctrl:"CanvassMessage",m_id:"tdv2-applet-canvass.message",m_mode:"json"}),B='<div class="wafer-fetch" data-wf-trigger="onLoad" data-wf-cache-strategy="cacheFirst" data-wf-replace="1" '+"data-wf-body=".concat(j," ")+"data-wf-url=".concat(T,"></div>");return D.innerHTML=B,void n.base.sync(D)}if(!i.CanvassComments)return void console.error("[comments] Missing required window.YAHOO.CanvassComments object");var F=g&&"article_20";g?-1!==d.indexOf("enableDarkMode")&&(F="article_20_dark"):-1!==d.indexOf("enableShareUrlToShortenUrl")&&(F="article_20_shorten_url");var H={apptype:"default",bucket:y.test_id||"",context:r||"",contextDisplayText:x.replace(/'/g,"%27")||"",contextUrl:M||"",device:s,expanded:E,lang:m,namespace:"preview"===I?"yahoo_offnet":"yahoo_content",prid:w._rid||"",rapid:t,rapidKeys:w,region:f,site:p,spaceid:P,theme:"redesign",themeContainerClasses:"Ff(YahooSans)",trafficSource:F,useRelativeHostName:1};b&&(H.messageId=b,O&&(H.replyId=O)),e.CAAS_COMMENTS=new i.CanvassComments(S,H);for(var N=document.getElementsByClassName("caas-comment"),Y=0;Y<N.length;Y++)N[Y].addEventListener("click",C)}catch(e){}}}(u)}(window)}();
//# sourceMappingURL=comments.js.map
