"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){var e=document.querySelector('meta[name="description"]'),t=document.querySelector('meta[property="og:description"]'),n=document.querySelector('meta[name="twitter:description'),r=document.querySelector('link[rel="canonical"]'),a=document.querySelector('meta[property="og:url"]'),o=document.querySelector('meta[property="og:title"]'),i=document.querySelector('meta[name="twitter:title"]'),c=document.querySelector('meta[property="og:image"]'),l=document.querySelector('meta[name="twitter:image"]'),u=document.querySelector('meta[name="twitter:image:src"]'),d=document.getElementsByTagName("head")[0],s=window.YAHOO.context||{};function m(s){if(window.history.replaceState(null,s.title,s.url),document.title=s.title,o&&o.setAttribute("content",s.title),i&&i.setAttribute("content",s.title),e&&e.setAttribute("content",s.description),t&&t.setAttribute("content",s.description),n&&n.setAttribute("content",s.description),r&&r.setAttribute("href",s.canonicalUrl),a&&a.setAttribute("content",s.canonicalUrl),c&&c.setAttribute("content",s.shareImage),l&&l.setAttribute("content",s.shareImage),u&&u.setAttribute("content",s.shareImage),Array.from(document.querySelectorAll('link[rel="alternate"]')).forEach((function(e){e.remove()})),s.hrefLangs){var m=document.createDocumentFragment();s.hrefLangs.map((function(e){var t=document.createElement("link");t.setAttribute("rel","alternate"),t.setAttribute("href",e.href),t.setAttribute("hreflang",e.hrefLang),m.appendChild(t)})),d&&d.appendChild(m)}}window.wafer&&window.wafer.ready((function(){var t="MAIN_ARTICLE_ID",n=t,a={MAIN_ARTICLE_ID:{url:window.location.href,title:document.title,description:e?e.getAttribute("content"):"",canonicalUrl:r?r.href:null,shareImage:c?c.getAttribute("content"):null,hrefLangs:Array.from(document.querySelectorAll('link[rel="alternate"]')).map((function(e){return{href:e.getAttribute("href"),hrefLang:e.getAttribute("hreflang")}}))}};window.wafer.on("caas:article:inview",(function(e){var t=e.meta&&e.meta.data||{},r=t.uuid;if(r&&!a[r]){a[r]=function(e){var t=document.createElement("a");return t.href=e.url,{url:t.pathname,title:e.title,description:e.summary,canonicalUrl:e.canonicalUrl,shareImage:e.shareImage?e.shareImage.url:"",hrefLangs:e.hrefLangs?e.hrefLangs.filter((function(e){return"alternate"===e.rel})):[]}}(t),n===r&&m(a[r]);var o={},i=parseInt(t.spaceId,10);window.rapidInstance&&window.rapidPageConfig&&((o=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];Array.isArray(r)?(t[n]=[],r.forEach((function(e){t[n].push(e)}))):"function"==typeof r||(Object(r)===r?t[n]=Object.assign({},r):t[n]=r)}return t}(window.rapidPageConfig.rapidConfig)).spaceid=i,o.pct=t.contentType,o.pstaid=r,o.pstaid_p=r,o.pcp=t.publisher,"zh-Hant-TW"!==s.lang&&"zh-Hant-HK"!==s.lang||"smartphone"!==s.device||(o.tag=(t.editorialTags||[]).concat([t.keywords,t.hashtag]).filter(Boolean).join(", ")),window.rapidInstance.beaconPageview(o)),function(e,t){if(window.YAHOO&&window.YAHOO.CanvassComments){var n="community-bar-"+e.uuid,r=document.getElementById(n);if(!r)return;var a=document.getElementById("community-bar");a&&a.parentElement&&a.parentElement.appendChild(r);var o=0;document&&document.location.search.indexOf("bcmt")>=1&&(o=1),-1===s.feature.indexOf("disableContentComments")&&-1===s.feature.indexOf("disableCommentsMessage")||(o=0);var i="smartphone"===s.device,c=i&&"article_20";i&&-1!==s.feature.indexOf("enableDarkMode")&&(c="article_20_dark"),new window.YAHOO.CanvassComments(n,{apptype:"default",bucket:t.test_id||"",context:e.uuid,contextDisplayText:e.title,contextUrl:e.url,device:s.device,expanded:o,lang:s.lang,namespace:"preview"===e.contentType?"yahoo_offnet":"yahoo_content",prid:t.keys._rid||"",rapid:window.rapidInstance,rapidKeys:t.keys,region:s.region,site:s.site,spaceid:parseInt(e.spaceId,10),theme:"redesign",themeContainerClasses:"Ff(YahooSans)",trafficSource:c,useRelativeHostName:1})}}(t,o),function(e,t){var n=document.querySelector("#related-article-container-"+e+" .adPlaceHolder");if(n&&window.DARLA){n.id=n.id.replace("placeHolder-","");var r=n.dataset.pos,a="clusterDarlaEvent"+r;window.DARLA.add(a,{name:a,ps:_defineProperty({},r,{autoIV:1,autoMax:25,autoRT:"10000"}),ref:window.location.href,sa:window.DARLA.evtSettings("AUTO").sa,sp:t}),window.DARLA.event(a)}}(r,i)}}));var o=document.getElementById("related-content-wrapper"),i=Array.from(document.querySelectorAll("#related-content-wrapper > li")),l=Array.from(document.querySelectorAll('div[id^="community-bar"]'));var u=window.wafer.utils.throttle((function(e){var r=n;e.scrollY+window.screen.height+-150<o.offsetTop?r=t:i.forEach((function(e,t){e.offsetHeight>0&&window.wafer.utils.elementInView(e,{offsetY:-150},window.wafer.base.viewport)&&(r=e.id.replace("related-article-container-",""))})),r!==n&&function(e){var r=(n=e)===t?"community-bar":"community-bar-"+n;l.forEach((function(e){e.id===r?e.hidden=!1:e.hidden=!0}));var o=a[e];o&&m(o)}(r)}),16);window.wafer.on("scroll",u);var d=function(e){var t=e.meta.data,n=t.href,r=n&&window.open("",t.target||"_blank")||n&&window;window.rapidInstance?window.rapidInstance.beaconClick(t.sec,t.slk,t.pos||0,t.params||{},t.outcm||null,(function(){r&&(r.location.href=n)})):r&&(r.location.href=n)};window.wafer.on("caas:link:clicked",d),window.wafer.on("caas:yahooLink:clicked",d)}))}();